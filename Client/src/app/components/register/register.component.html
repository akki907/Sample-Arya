<div class="container">
  <div class="registercard">
    <h3 class="page-header">Register</h3>

    <div class=" show-hide-message">
      <div [ngClass]="messageClass">
        {{message}}
      </div>
    </div>

    <form [formGroup]="form" (submit)="onRegisterSubmit()">
      <div class="form-group">
        <label for="email">Email address </label>
        <div [ngClass]="{'has-error': (form.controls.email.errors && form.controls.email.dirty) || (!emailValid && form.controls.email.dirty),
    'has-success': !form.controls.email.errors && emailValid}">
          <input type="email" placeholder="Bruce@wayneEnterprice.com" class="form-control" id="email" formControlName="email" (blur)="checkEmail()">
          <ul class="help-block">
            <li *ngIf="form.controls.email.errors?.required && form.controls.email.dirty">
              This Field is required
            </li>
            <li *ngIf="form.controls.email.errors?.minlength || form.controls.email.errors?.maxlength">
              Minimum characters : 5,Maximum Characters : 30
            </li>
            <li *ngIf="form.controls.email.errors?.email && form.controls.email.dirty">
              Please Provide a valid Email.
            </li>
            <li *ngIf="emailMessage">
              {{emailMessage}}
            </li>
          </ul>
        </div>
      </div>
      <div class="form-group">
        <label for="username">User Name </label>
        <div [ngClass]="{'has-error': (form.controls.username.errors && form.controls.username.dirty) || (!usernameValid && form.controls.username.dirty),
    'has-success': !form.controls.username.errors && usernameValid}">
          <input type="text" class="form-control" placeholder="Batman" id="username" formControlName="username" (blur)="checkUsername()">
          <ul class="help-block">
            <li *ngIf="form.controls.username.errors?.required && form.controls.username.dirty">
              This Field is required
            </li>
            <li *ngIf="form.controls.username.errors?.minlength || form.controls.username.errors?.maxlength">
              Minimum characters : 3,Maximum Characters : 15
            </li>
            <li *ngIf="form.controls.username.errors?.validateUsername && form.controls.username.dirty">
              Username must not have any special character
            </li>
            <li *ngIf="usernameMessage">
              {{usernameMessage}}
            </li>
          </ul>
        </div>
      </div>
      <div class="form-group">
        <label for="fullName">FullName </label>
        <div [ngClass]="{'has-error': (form.controls.fullName.errors && form.controls.fullName.dirty),
    'has-success': !form.controls.fullName.errors}">
          <!-- <input type="fullName" class="form-control" placeholder="Bruce Wayne" id="fullName" formControlName="fullName"> -->
          <input type="text" class="form-control" placeholder="Bruce Wayne" id="fullName" formControlName="fullName">
          <ul class="help-block">
            <li *ngIf="form.controls.fullName.errors?.required && form.controls.fullName.dirty">
              This Field is required
            </li>
            <li *ngIf="form.controls.fullName.errors?.minlength || form.controls.fullName.errors?.maxlength">
              Minimum characters : 2,Maximum Characters : 35
            </li>
          </ul>
        </div>
      </div>

      <div class="form-group">
        <div class="switch">
          <label>
            User
            <input type="checkbox" [checked]="isAdmin" formControlName="role" (change)="isAdmin = !isAdmin">
            <span class="lever"></span>
            Admin
          </label>
        </div>
      </div>




      <div class="form-group">
        <label for="pwd">Password </label>
        <div [ngClass]="{'has-error': (form.controls.password.errors && form.controls.password.dirty),
    'has-success': !form.controls.password.errors}">
          <input type="password" class="form-control" placeholder="******" id="pwd" formControlName="password">
          <ul class="help-block">
            <li *ngIf="form.controls.password.errors?.required && form.controls.password.dirty">
              This Field is required
            </li>
            <li *ngIf="form.controls.password.errors?.minlength || form.controls.password.errors?.maxlength">
              Minimum characters : 5,Maximum Characters : 35
            </li>
            <li *ngIf="form.controls.password.errors?.validPassword && form.controls.password.dirty">
              Must have at least one uppercase ,lowercase,special character, and number
            </li>
          </ul>
        </div>
      </div>
      <div class="form-group">
        <label for="cnfpwd">Confirm Password </label>
        <div [ngClass]="{'has-error': (form.controls.confirm.errors && form.controls.confirm.dirty) || (form.errors?.matchingPasswords && form.controls.confirm.dirty),
    'has-success': !form.controls.confirm.errors && !form.errors?.matchingPasswords }">
          <input type="password" class="form-control" placeholder="******" id="cnfpwd" formControlName="confirm">
          <ul class="help-block">
            <li *ngIf="form.controls.confirm.errors?.required && form.controls.confirm.dirty">
              This Field is required
            </li>
            <li *ngIf="form.errors?.matchingPasswords && form.controls.confirm.dirty">
              Password do not match.
            </li>
          </ul>
        </div>
      </div>

      <input [disabled]="!form.valid || processing || !emailValid || !usernameValid" type="submit" class="btn btn-primary" value="Submit"
      />
    </form>
    <br>
    <a routerLink="/login">I have an account</a>
  </div>
</div>
